(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-431fff8d"],{"0d87":function(e,t,i){"use strict";i("0e5f")},"0e5f":function(e,t,i){},"1b5f":function(e,t,i){"use strict";i("f5cb")},"2bcf":function(e,t,i){},"4cbb":function(e,t,i){"use strict";i("8550")},7530:function(e,t,i){"use strict";i("b779")},8550:function(e,t,i){},9318:function(e,t,i){"use strict";i("2bcf")},a85d:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-aside",{attrs:{width:"240px"}},[i("Tree",{ref:"tree",on:{openForm:e.openForm,selectNode:e.selectNode}})],1),i("el-main",[i("div",{staticStyle:{margin:"10px"}},[i("router-link",{staticStyle:{"margin-right":"5px"},attrs:{to:{path:"/document/index/views"}}},[i("el-button",{attrs:{type:"success",icon:"el-icon-delete",size:"mini"}},[e._v("预览")])],1),i("router-link",{staticStyle:{"margin-right":"5px"},attrs:{to:{path:"/document/index/simple"}}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("保存")])],1),i("router-link",{staticStyle:{"margin-right":"5px"},attrs:{to:{path:"/document/index/edit"}}},[i("el-button",{attrs:{type:"info",icon:"el-icon-share",size:"mini"}},[e._v("删除")])],1)],1),i("el-tabs",{staticStyle:{height:"800px"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"tab-1"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-eleme"}),e._v(" 预览")]),i("Info",{ref:"docInfo",attrs:{"doc-id":e.docId,"viewer-text":e.viewerText}})],1),i("el-tab-pane",{attrs:{name:"tab-2"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-s-help"}),e._v(" 简要编写")]),i("Simple",{ref:"docSimple",attrs:{"doc-id":e.docId,"doc-name":e.docName,"viewer-text":e.viewerText}})],1),i("el-tab-pane",{attrs:{name:"tab-3"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-set-up"}),e._v(" 文本编写")]),i("Edit",{ref:"docEdit",attrs:{"doc-id":e.docId,"doc-name":e.docName,"viewer-text":e.viewerText}})],1)],1)],1),i("Form",{ref:"openForm",attrs:{"expend-node":e.expendNode}})],1)},n=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"custom-tree-container",staticStyle:{"margin-top":"30px"}},[i("div",{staticClass:"block"},[i("h2",{staticStyle:{margin:"10px"}},[i("i",{staticClass:"el-icon-guide"}),e._v("文档目录"),i("i",{staticClass:"el-icon-plus icon",staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.addNodeView("-1")}}})]),i("el-tree",{ref:"tree",attrs:{"node-key":"id","icon-class":"el-icon-arrow-right",load:e.loadNextNode,props:e.defaultProps,"expand-on-click-node":!1,lazy:""},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return i("span",{staticClass:"custom-tree-node"},[i("div",[i("i",{directives:[{name:"show",rawName:"v-show",value:0==o.data.type,expression:"node.data.type == 0"}],staticClass:"el-icon-notebook-2"}),i("i",{directives:[{name:"show",rawName:"v-show",value:1==o.data.type,expression:"node.data.type == 1"}],staticClass:"el-icon-collection-tag"}),e._v(" "+e._s(o.label)+" ")]),i("span",[i("i",{directives:[{name:"show",rawName:"v-show",value:0==o.data.type,expression:"node.data.type == 0"}],staticClass:"el-icon-plus icon",on:{click:function(t){return e.addNodeView(o)}}}),i("i",{staticClass:"el-icon-edit icon"}),i("i",{staticClass:"el-icon-close icon"})])])}}])})],1)])},s=[],r=(i("e9c4"),i("d3b7"),i("159b"),{data:function(){var e=[];return{options:{},defaultProps:{id:"id",isLeaf:"leaf"},superId:"",data:JSON.parse(JSON.stringify(e))}},created:function(){},methods:{loadNextNode:function(e,t){var i=e.data?e.data.id:"-1";this.$store.dispatch("document/queryNode",i).then((function(e){var i=e.data;i.forEach((function(e){e.leaf=0!==e.type})),t(i)}))},addNodeView:function(e){this.$emit("openForm",e.data.id)},expendNode:function(e){var t=this.$refs.tree.getNode(e);t&&(t.loaded=!1,t.expand())},nodeClick:function(e,t,i){1===e.type?this.$emit("selectNode",e.id,e.label):this.$emit("selectNode","","")}}}),l=r,c=(i("0d87"),i("2877")),d=Object(c["a"])(l,a,s,!1,null,"291e369a",null),u=d.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"目录节点",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.form}},[i("el-form-item",{attrs:{label:"目录类型:","label-width":"160px"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{label:"目录",value:"0"}}),i("el-option",{attrs:{label:"文档",value:"1"}})],1)],1),i("el-form-item",{attrs:{label:"目录名称:","label-width":"160px"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handler}},[e._v("确 定")])],1)],1)},m=[],f={props:{expendNode:{type:Function,default:null}},data:function(){return{dialogFormVisible:!1,form:{id:"",superId:"",label:"",type:"0"}}},methods:{openForm:function(e){this.form.superId=e,this.dialogFormVisible=!0},handler:function(){var e=this;this.$store.dispatch("document/submitNode",this.form).then((function(t){e.dialogFormVisible=!1,e.expendNode(e.form.superId)}))}}},h=f,b=Object(c["a"])(h,p,m,!1,null,null,null),v=b.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("viewer",{ref:"docViewer",attrs:{"initial-value":e.viewerText,height:"500px"}})},g=[],x=(i("f513"),i("e459")),k={components:{Viewer:x["b"]},props:{docId:{type:String,default:""},viewerText:{type:String,default:"This is initialValue."}},data:function(){return{}},methods:{reset:function(e){this.$refs.docViewer.invoke("setMarkdown",e)}}},w=k,N=(i("4cbb"),Object(c["a"])(w,y,g,!1,null,"f37e988c",null)),S=N.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Editor",{ref:"docSimple",attrs:{"initial-value":e.editorText,options:e.editorOptions,"initial-edit-type":e.options.editType,height:"700px","min-height":e.options.minHeight}})},I=[],_=(i("f4c3"),{components:{Editor:x["a"]},props:{docId:{type:String,default:""},docName:{type:String,default:""},viewerText:{type:String,default:""}},data:function(){return{editorText:"This is initialValue.",options:{theme:"dark",minHeight:"200px",editType:"wysiwyg"},editorOptions:{minHeight:"200px",hideModeSwitch:!0,language:"zh-CN",useCommandShortcut:!0,usageStatistics:!0,theme:"dark",initialEditType:"wysiwyg",toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","link"],["code","codeblock"],[{el:this.createLastButton(),command:"bold",tooltip:"保存"}]]}}},methods:{createLastButton:function(){var e=this,t=document.createElement("button");return t.className="toastui-editor-toolbar-icons last",t.style.backgroundImage="none",t.style.margin="0",t.innerHTML='<i class="el-icon-check"></i>',t.addEventListener("click",(function(){e.save()})),t},save:function(){var e=this,t={nodeId:this.docId,name:this.docName,body:this.$refs.docSimple.invoke("getMarkdown")};this.$store.dispatch("document/doc_save",t).then((function(t){e.$notify({title:"成功",message:"这是一条成功的提示消息",type:"success"})}))},reset:function(e){this.$refs.docSimple.invoke("setMarkdown",e,!1)}}}),E=_,T=(i("9318"),Object(c["a"])(E,$,I,!1,null,"46eab1de",null)),C=T.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Editor",{ref:"docEdit",attrs:{"initial-value":e.editorText,options:e.editorOptions,"initial-edit-type":e.options.editType,height:"700px"}})},V=[],O={components:{Editor:x["a"]},props:{docId:{type:String,default:""},docName:{type:String,default:""}},data:function(){return{editorText:"This is initialValue.",options:{theme:"dark",editType:""},editorOptions:{hideModeSwitch:!0,language:"zh-CN",useCommandShortcut:!0,usageStatistics:!0,theme:"dark",toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","link"],["code","codeblock"],[{el:this.createLastButton(),command:"bold",tooltip:"保存"}]]}}},methods:{createLastButton:function(){var e=this,t=document.createElement("button");return t.className="toastui-editor-toolbar-icons last",t.style.backgroundImage="none",t.style.margin="0",t.innerHTML='<i class="el-icon-check"></i>',t.addEventListener("click",(function(){console.log(e.$refs.toastuiEditor.invoke("getMarkdown"))})),t},reset:function(e){this.$refs.docEdit.invoke("setMarkdown",e,!1)}}},L=O,M=(i("1b5f"),Object(c["a"])(L,F,V,!1,null,"77723586",null)),j=M.exports,z={components:{Tree:u,Form:v,Info:S,Simple:C,Edit:j},data:function(){return{docId:"",docName:"",form:{},dialogFormVisible:!0,activeName:"tab-1",viewerText:"这是一条成功的提示消息"}},methods:{openForm:function(e){this.$refs.openForm.openForm(e)},expendNode:function(e){this.$refs.tree.expendNode(e)},selectNode:function(e,t){var i=this;this.docId=e,this.docName=t,this.activeName="tab-1",this.$store.dispatch("document/doc_body",this.docId).then((function(e){i.$refs.docInfo.reset(e.data),i.$refs.docSimple.reset(e.data),i.$refs.docEdit.reset(e.data)}))},save:function(){var e,t=this;switch(this.activeName){case"tab-2":e=this.$refs.docInfo.reset(this.response.data);break;case"tab-3":e=this.$refs.docInfo.reset(this.response.data);break;default:}var i={nodeId:this.docId,name:this.docName,body:e};this.$store.dispatch("document/doc_save",i).then((function(e){t.$notify({title:"成功",message:"这是一条成功的提示消息",type:"success"})}))}}},H=z,B=(i("7530"),Object(c["a"])(H,o,n,!1,null,"2d2c56d4",null));t["default"]=B.exports},b779:function(e,t,i){},f5cb:function(e,t,i){}}]);