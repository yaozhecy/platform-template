(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08842566"],{"34e2":function(e,t,a){},3855:function(e,t,a){"use strict";a("3f91")},"3f91":function(e,t,a){},"426b":function(e,t,a){"use strict";a("34e2")},"5eed":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{margin:"10px","border-radius":"4px"}},[a("el-header",[a("span",{staticStyle:{"font-size":"small"}},[e._v("数据源：")]),a("el-input",{staticStyle:{width:"260px"},attrs:{size:"mini",placeholder:"请输入内容"},on:{focus:e.showCommonEdit},model:{value:e.dbSource,callback:function(t){e.dbSource=t},expression:"dbSource"}},[a("template",{slot:"prepend"},[e._v("V100")])],2),a("span",{staticStyle:{"font-size":"small","margin-left":"10px"}},[e._v("模板：")]),a("el-select",{staticStyle:{"margin-top":"10px","margin-right":"10px",width:"160px"},attrs:{filterable:"",remote:"",size:"mini",placeholder:"选择模板","remote-method":e.remoteMethod},on:{change:function(t){return e.handleDs()}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.queryTableList()}}},[e._v("查询")]),a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:function(t){return e.exportZip()}}},[e._v("下载")])],1),a("el-main",[a("el-table",{ref:"mainTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-style":{height:"20px"},height:"400px","cell-style":{padding:"0"}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"tableName",label:"表名",width:"180"}}),a("el-table-column",{attrs:{prop:"entityName",label:"实体名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"输入数据"},model:{value:t.row.entityName,callback:function(a){e.$set(t.row,"entityName",a)},expression:"scope.row.entityName"}})]}}])}),a("el-table-column",{attrs:{prop:"englishName",label:"英文名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"输入数据"},model:{value:t.row.englishName,callback:function(a){e.$set(t.row,"englishName",a)},expression:"scope.row.englishName"}})]}}])}),a("el-table-column",{attrs:{prop:"tableDesc",label:"表描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Preview",{attrs:{"table-row":t.row,"ds-id":e.select}}),a("router-link",{staticStyle:{margin:"10px",color:"#00C3FF"},attrs:{to:{path:"/generate/columnlist/"+t.row.id}}},[e._v("详情 ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right","margin-top":"12px"},attrs:{small:"",background:"",total:e.page.total,layout:"total, sizes, prev, pager, next, jumper","page-size":e.page.size,"page-sizes":[10,20,50],"current-page":e.page.current},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("CommonEdit",{ref:"CommonEditRef"}),a("db-table",{ref:"dbTable"})],1)},o=[],i=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("5c96")),s=a("b964"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"right",title:"Ctrl C + Ctrl V",trigger:"click"}},[a("el-tabs",{staticStyle:{width:"800px",height:"500px"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"po"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.po,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"mapper.xml"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.mapperXml,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"mapper"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.mapper,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"service"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.service,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"serviceImpl"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.serviceImpl,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"controller"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.controller,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"vo"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.vo,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"transfor"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.transfor,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"dto"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.dto,options:e.cmOptions}})],1),a("el-tab-pane",{attrs:{label:"sql"}},[a("codemirror",{staticClass:"code-edit",attrs:{value:e.code.sql,options:e.cmOptions}})],1)],1),a("el-button",{staticStyle:{margin:"10px"},attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(t){return e.init()}},slot:"reference"},[e._v("阅览")])],1)},l=[],c=a("8f94"),d=(a("a7be"),a("0f7c"),a("f9d4"),a("7b00"),a("d5e0"),a("4ba6"),a("959b"),a("db91"),a("903e"),a("02f0"),a("ffda"),a("c0e2"),a("693d8"),{components:{codemirror:c["codemirror"]},props:{tableRow:{type:Object,default:{}},dsId:{type:String,default:""}},data:function(){return{code:{mapperXml:""},cmOptions:{mode:"x-java",theme:"ambiance",indentUnit:4,smartIndent:!0,tabSize:4,lineNumbers:!0,firstLineNumber:1,showCursorWhenSelecting:!0,readOnly:!1}}},methods:{init:function(){var e=this;this.$store.dispatch("datasource/codeInfo",{dsId:this.dsId,tableId:this.tableRow.id}).then((function(t){e.code=t.data}))}}}),u=d,p=(a("426b"),a("2877")),m=Object(p["a"])(u,r,l,!1,null,null,null),h=m.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"修改模板配置",size:"28%",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"工具包路径："}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.commonPackage,callback:function(t){e.$set(e.form,"commonPackage",t)},expression:"form.commonPackage"}})],1),a("el-form-item",{attrs:{label:"包路径："}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.packagePath,callback:function(t){e.$set(e.form,"packagePath",t)},expression:"form.packagePath"}})],1),a("el-form-item",{attrs:{label:"模块名称："}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handle}},[e._v("修改")])],1)],1)],1)},f=[],g={data:function(){return{id:"",drawer:!1,form:{id:"",commonPackage:"",packagePath:"",moduleName:""}}},methods:{init:function(){var e=this;this.$store.dispatch("datasource/queryCommonData",this.id).then((function(t){e.form=t.data})).catch((function(e){console.log(e)}))},handle:function(){var e=this;this.$store.dispatch("datasource/updateCommonData",this.form).then((function(t){Object(i["Message"])({message:"操作成功",type:"success",duration:5e3}),e.drawer=!1})).catch((function(e){console.log(e)}))},show:function(e){this.id=e,this.drawer=!0,this.init()}}},y=g,w=Object(p["a"])(y,b,f,!1,null,null,null),v=w.exports,x=a("bc3a"),C=a.n(x),z=a("6203"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"数据源",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{ref:"table",staticStyle:{height:"300px"},attrs:{size:"mini",data:e.page.records,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{property:"name",label:"数据源名称",width:"120"}}),a("el-table-column",{attrs:{property:"address",label:"类型",width:"120"}}),a("el-table-column",{attrs:{property:"name",label:"版本",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",placeholder:"请选择",filterable:""},on:{focus:t.row.dataType},model:{value:t.row.dataType,callback:function(a){e.$set(t.row,"dataType",a)},expression:"scope.row.dataType"}},e._l(e.javaTypes,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),a("el-table-column",{attrs:{property:"name",label:"文件/数据库名称"}})],1),a("el-pagination",{staticStyle:{"text-align":"right","margin-top":"12px"},attrs:{small:"",background:"",total:e.page.total,layout:"total, sizes, prev, pager, next, jumper","page-size":e.page.size,"page-sizes":[10,20,50],"current-page":e.page.current},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.queryTableList()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportZip()}}},[e._v("确定")])],1)],1)},S=[],O=(a("b0c0"),{data:function(){return{dialogVisible:!1,page:{total:0,current:1,size:10,records:[]},javaTypes:["String","Intger","Date"],currentRow:null}},mounted:function(){this.queryPage()},methods:{queryPage:function(){var e=this;Object(s["f"])(this.page.current,this.page.size,{name:this.name}).then((function(t){e.page=t.data}))},show:function(){this.dialogVisible=!0},handleCurrentChange:function(e){this.currentRow=e},handleSizeChange:function(e){this.currentRow=e}}}),_=O,T=Object(p["a"])(_,k,S,!1,null,null,null),$=T.exports,D={components:{Preview:h,CommonEdit:v,DbTable:$},data:function(){return{dbSource:"",page:{total:0,current:1,size:10},loading:!1,subDrawer:!1,rowDrawer:!1,tableData:[],options:[],select:this.$store.getters.dsId,data:{tableName:""},dsType:!1}},created:function(){this.queryDsList()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},handleDs:function(){var e=this;this.$store.commit("datasource/RECORD_DS",this.select),this.queryTableList(),this.options.forEach((function(t,a){t.id!==e.select||(e.dsType="Excel"!==t.dbType)}))},generateCode:function(){var e=this;this.loading=!0,this.$store.dispatch("datasource/generate",this.select).then((function(t){e.queryTableList(),e.loading=!1}))},updateList:function(){0!==this.tableData.length?this.$store.dispatch("tableinfo/tableUpdate",{list:this.tableData}).then((function(e){Object(i["Message"])({message:"操作成功",type:"success",duration:5e3})})):Object(i["Message"])({message:"数据为空",type:"warning",duration:5e3})},queryTableList:function(){var e=this;""!==this.select&&Object(z["b"])(this.page.current,this.page.size,{id:this.select}).then((function(t){e.page.size=t.data.size,e.page.total=t.data.total,e.page.current=t.data.current,e.tableData=t.data.records}))},fetchData:function(){var e=this;Object(s["f"])().then((function(t){e.list=t.data.items}))},queryDsList:function(){var e=this;this.$store.dispatch("datasource/list").then((function(t){e.options=t.data,e.options instanceof Array&&e.options.length>0&&(e.dsItem=e.options[0],e.queryTableList())})).catch((function(e){console.log(e)}))},handleClick:function(e){console.log(e)},showCommonEdit:function(){this.$refs.dbTable.show()},showInfo:function(e){console.log(e)},exportZip:function(){var e=this.$refs.mainTable.selection;if(0!==e.length){for(var t=new Array(e.length),a=0,n=e.length;a<n;a++)t[a]=e[a].id;C()({url:"/codegeneration/code/code?id=6cc4e68b754128cac67a521825b16a54",method:"post",data:{ds:this.select,tables:t},responseType:"arraybuffer"}).then((function(e){var t=new Blob([e.data],{type:"application/zip"}),a=document.createElement("a"),n="代码"+1*new Date+".zip";a.href=window.URL.createObjectURL(t),a.download=decodeURIComponent(n),a.click()})).catch((function(){Object(i["Message"])({message:"数据异常",type:"error",duration:5e3})}))}else Object(i["Message"])({message:"请选择库表信息",type:"warning",duration:5e3})},handleSizeChange:function(e){this.page.size=e,this.queryTableList()},handleCurrentChange:function(e){this.page.current=e,this.queryTableList()},remoteMethod:function(e){var t=this;this.$store.dispatch("datasource/list",e).then((function(e){t.options=e.data,t.options instanceof Array&&t.options.length>0&&(t.dsItem=t.options[0],t.queryTableList())})).catch((function(e){console.log(e)}))}}},j=D,N=(a("3855"),Object(p["a"])(j,n,o,!1,null,null,null));t["default"]=N.exports}}]);